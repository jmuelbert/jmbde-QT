set(LICENSE_FILE "LICENSE")
set(README_FILE "README.md")

# set component installation rules
set(CPACK_COMPONENT_BINARIES_DISPLAY_NAME "Main application")
set(CPACK_COMPONENT_BINARIES_DESCRIPTION
    "This will install the main application.")
set(CPACK_COMPONENT_DATA_FILES_DISPLAY_NAME "Data files for this application.")
set(CPACK_COMPONENT_DATA_FILES_DESCRIPTION
    "This will install random data files.")
set(CPACK_ALL_INSTALL_TYPES Full Upgrade) # set installation types
set(CPACK_COMPONENT_BINARIES_INSTALL_TYPES Full Upgrade)
set(CPACK_COMPONENT_DATA_FILES_INSTALL_TYPES Full)
set(CPACK_COMPONENTS_ALL binaries)
if(CMAKE_CL_64)
  set(CPACK_NSIS_INSTALL_ROOT "$PROGRAMFILES64")
else(CMAKE_CL_64)
  set(CPACK_NSIS_INSTALL_ROOT "$PROGRAMFILES")
endif(CMAKE_CL_64)
# CPACK: General Settings
set(CPACK_GENERATOR "TBZ2")
set(CPACK_PACKAGE_NAME "jmbde-qt")
set(CPACK_PACKAGE_DESCRIPTION_SUMMARY "An collection tool for companies")
# TODO: shorten lines in the Readme.txt to make rpmlint happy
set(CPACK_PACKAGE_DESCRIPTION_FILE "${CMAKE_SOURCE_DIR}/${README_FILE}")
set(CPACK_PACKAGE_VENDOR "Jürgen Mülbert")
set(CPACK_PACKAGE_CONTACT "juergen.muelbert@outlook.de")
set(CPACK_PACKAGE_VERSION_MAJOR "${RELEASE_SERVICE_VERSION_MAJOR}")
set(CPACK_PACKAGE_VERSION_MINOR "${RELEASE_SERVICE_VERSION_MINOR}")
set(CPACK_PACKAGE_VERSION_PATCH "${RELEASE_SERVICE_VERSION_PATCH}")
set(CPACK_PACKAGE_VERSION "${RELEASE_SERVICE_VERSION}")

# CPACK: RPM Specific Settings
set(CPACK_RPM_PACKAGE_LICENSE "GPLv3+")
set(CPACK_RPM_PACKAGE_GROUP "Business/Tools")

# CPACK: DEB Specific Settings
set(CPACK_DEBIAN_PACKAGE_SECTION "Business")

set(CPACK_RESOURCE_FILE_README "${CMAKE_SOURCE_DIR}/${README_FILE}")
set(ICONS_DIR "${CMAKE_SOURCE_DIR}/resources")
if(WIN32)
  set(CPACK_GENERATOR "NSIS" "ZIP")
  set(CPACK_PACKAGE_EXECUTABLES "jmbde" "jmbde")
  set(CPACK_PACKAGE_INSTALL_DIRECTORY "jmbde")
  set(CPACK_PACKAGE_FILE_NAME "jmbde ${RELEASE_SERVICE_VERSION}")
  set(CPACK_RESOURCE_FILE_LICENSE "${CMAKE_SOURCE_DIR}/${LICENSE_FILE}")
  set(CPACK_NSIS_EXECUTABLES_DIRECTORY "${BIN_INSTALL_DIR}")
  set(CPACK_NSIS_MUI_ICON "${ICONS_DIR}/jmbde.ico")
  # set(CPACK_PACKAGE_ICON "${ICONS_DIR}\\\\CharmNSISHeader.bmp")
  set(CPACK_NSIS_URL_INFO_ABOUT "https://io.github.com/jmuelbert/jmbde-qt")
  set(CPACK_NSIS_INSTALLED_ICON_NAME "jmbde${CMAKE_EXECUTABLE_SUFFIX}")
  set(CPACK_NSIS_MENU_LINKS "${LICENSE_FILE}" "License" "${README_FILE}"
                            "Readme")
  set(CPACK_NSIS_MUI_FINISHPAGE_RUN "${CPACK_NSIS_INSTALLED_ICON_NAME}")
  set(CPACK_NSIS_ENABLE_UNINSTALL_BEFORE_INSTALL OFF)
  set(CPACK_NSIS_MODIFY_PATH ON)
  set(CPACK_NSIS_DISPLAY_NAME "jmbde ${RELEASE_SERVICE_VERSION}")
elseif(APPLE)
  set(CPACK_GENERATOR "DragNDrop")
  set(CPACK_DMG_FORMAT "UDBZ")
  set(CPACK_DMG_VOLUME_NAME "jmbde-qt")
  set(CPACK_SYSTEM_NAME "OSX")
  set(CPACK_PACKAGE_FILE_NAME "jmbde ${RELEASE_SERVICE_VERSION}")
  set(CPACK_PACKAGE_ICON "${ICONS_DIR}/CharmDMG.icns")
  set(CPACK_DMG_DS_STORE "${ICONS_DIR}/CharmDSStore")
  set(CPACK_DMG_BACKGROUND_IMAGE "${ICONS_DIR}/CharmDMGBackground.png")
elseif(UNIX)
  set(CPACK_SYSTEM_NAME "${CMAKE_SYSTEM_NAME}-${CMAKE_SYSTEM_PROCESSOR}")
endif()
