name: "Setup MSDO"
description: "Checkout the repo and setup dotnet and MSDO"
inputs:
  msdo-version:
    description: "The version of MSDO to use"
    required: true
runs:
  using: "composite"
  steps:
    - uses: actions/checkout@v4
    - uses: actions/setup-dotnet@v3
      with:
        dotnet-version: |
          5.0.x
          6.0.x
    - name: Run Microsoft Security DevOps
      uses: microsoft/security-devops-action@${{ inputs.msdo-version }}
      id: msdo

# Verwende die Composite Run Steps Action in deinem Workflow

jobs:
  MSDO:
    runs-on: windows-latest
    steps:
      - name: Setup MSDO
        uses: ./.github/actions/setup-msdo.yml # Verwende die lokale Action
        with:
          msdo-version: v1.7.2 # Gib den Eingabeparameter an
      - name: Upload results to Security tab
        uses: github/codeql-action/upload-sarif@v2
        with:
          sarif_file: ${{ steps.msdo.outputs.sarifFile }}
